<app-navbar></app-navbar>

<h1 *ngIf="title">{{title}}</h1>

<div class="container" *ngIf="products">
    <mat-card *ngFor="let product of products; let i = index">
        <mat-list role="list">
            <mat-list-item role="listitem">Title: {{ product.data.title }}</mat-list-item>
            <mat-list-item role="listitem">Description: {{ product.data.description }}</mat-list-item>
            <mat-list-item role="listitem">Price: {{ product.data.price }}</mat-list-item>
            <mat-list-item role="listitem">Category: {{ product.data.category }}</mat-list-item>
            <mat-list-item role="listitem">Employee: {{ product.data.employee }}</mat-list-item>
            <mat-list-item *ngIf="product.data.reviews?.length">
                <button mat-stroked-button color="accent" (click)="toggleReviews(i)">{{visibleIndex === i ? 'Hide
                    Reviews' :
                    'Show Reviews'}}</button>
            </mat-list-item>
            <div class="reviews" *ngIf="visibleIndex === i">
                <div *ngFor="let review of product.data.reviews">
                    <mat-list-item role="listitem">{{ review }}</mat-list-item>
                </div>
            </div>
            <button mat-fab color="warn" (click)="deleteProduct(product.id)" class="delete-btn"
                aria-label="delete product">
                <mat-icon>delete</mat-icon>
            </button>
        </mat-list>
    </mat-card>
</div>